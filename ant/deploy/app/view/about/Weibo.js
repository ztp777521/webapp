Ext.define("wecity.view.phone.my.Weibo",{extend:"Ext.DataView",xtype:"myWeiboContainer",config:{pageName:"myweibocontainerview",title:"我的微博",pageNo:1,totalPages:1,store:null,items:[{xtype:"toolbar",ui:"neutral",docked:"top",scrollable:false,style:"height:20px;font-size:10px;",items:[{xtype:"spacer"},{xtype:"container",cls:"textcolor_white",html:'<div class="margin8"><div class="left" style="color:#47893B;height:15px;line-height:15px;">向右滑动删除本条信息</div><img class="left" src="images/youhua.png"><a class="clear"></a></div>'},{xtype:"spacer"}]}],itemTpl:["<div>",'	<div class="left width5">','		<img style="width:60px; height:60px;" src="images/noface.png" />',"	</div>",'	<div class="left width6">&nbsp;</div>','	<div class="left">','		<div class="width5">{receivername}</div>','		<div class="triangle-border top width7">','			<div id="c_{msgid}" style="word-break:break-all; width:200px;">{content}</div>','			<div class="margin1 fontsize1 textcolor2">','				<div class="right">{sendtime}</div>','				<div class="clear"></div>',"			</div>","		</div>","	</div>",'	<div class="clear"></div>',"</div>",],listeners:{itemswipe:function(b,c,g,a,f,d){if(f.direction=="right"){b.fireEvent("delweibo",b,c,a)}},}},del:function(a){},initialize:function(){var a=this;var b=0;this.callParent(arguments);this.getScrollable().getScroller().on("scrollend",function(d,c,f,e){if((b-f)==0&&(Number)(a.getTotalPages())!=(Number)(a.getPageNo())){a.doSearch()}else{if((b-f)==0&&(Number)(a.getTotalPages())==(Number)(a.getPageNo())){wecity.view.Dialogs.showAlert(window.appTitle,"已经是最后一页！")}}});this.getScrollable().getScroller().on("maxpositionchange",function(c,e,d){b=e.y})},doSearch:function(){this.fireEvent("getWeibo",((Number)(this.getPageNo()))+1)}});