Ext.define("LocalStorageDao",{config:{fields:null,storageId:null,rowId:"id"},constructor:function(a){this.initConfig(a);return this},getAll:function(){var b=[];var a=localStorage.getItem(this.getStorageId());if(a){b=Ext.decode(a)}return b},getSortAll:function(a){var b=this.getAll();var c=this.getRowId();if(a=="asc"){b.sort(function(e,d){if(e[c]<d[c]){return -1}if(e[c]>d[c]){return 1}return 0})}else{if(a=="desc"){b.sort(function(e,d){if(e[c]>d[c]){return -1}if(e[c]<d[c]){return 1}return 0})}}return b},queryByField:function(e,c){var b=this.getAll();var d=null;for(var a=0;a<b.length;a++){if(b[a][e]==c){d=b[a];break}}return d},insert:function(b){var a=this.getAll();a.push(b);localStorage.setItem(this.getStorageId(),Ext.encode(a))},update:function(e){var d=this.getAll();var b=this.queryByField(this.getRowId(),e[this.getRowId()]);if(!b){this.insert(e)}else{var a=Ext.encode(d);var c=a.replace(Ext.encode(b),Ext.encode(e));localStorage.setItem(this.getStorageId(),c)}},del:function(e){var d=this.getAll();var b=this.queryByField(this.getRowId(),e[this.getRowId()]);if(b){var a=Ext.encode(d);var c=a.replace(Ext.encode(b)+",","");c=a.replace(Ext.encode(b),"");localStorage.setItem(this.getStorageId(),c)}}});