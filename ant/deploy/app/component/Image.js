Ext.define("eapp.component.Image",{extend:"Ext.Container",xtype:"imageEx",config:{src:null,width:0,height:0,offset:0,center:false,html:'<img  /><img style="display:none"  />',},initialize:function(){this.display(this.getSrc(),this.getWidth(),this.getHeight())},bindTapEvent:function(){var a=Ext.get(this.element.query("img")[0]);if(a.hasListener("tap")){a.un("tap",this.onTap)}a.on("tap",this.onTap,this)},onTap:function(){this.fireEvent("tap")},display:function(b,c,k){if(b==null||b==""){return}if(c==null||c=="undefined"){c=0}if(k==null||k=="undefined"){k=0}var g=this.element.query("img");var h=g[0];var j=g[1];var e=this.getOffset();var f=0,a=0;if(e==null||e=="undefined"){e=0}if(c==0&&k==0){var i=this;j.src=b;j.onload=function(){var p=j.width;var m=j.height;var o=document.body.scrollWidth;var q=document.body.clientHeight;var l=o/p;if(p>o){f=o;a=m*l}else{f=p;a=m}f=f-e;a=a-e;i.setWidth(f);i.setHeight(a);h.src=b;h.style.width=(f-2)+"px";h.style.height=(a-2)+"px";if(i.getCenter()){var n=(document.body.scrollWidth-f-e)/2;i.setStyle("margin-left:"+n+"px")}};j.onerror=function(){console.log("img 生成比例失败！")}}else{f=c-e;a=k-e;this.setWidth(f);this.setHeight(a);h.src=b;h.style.width=(f-2)+"px";h.style.height=(a-2)+"px";if(this.getCenter()){var d=(document.body.scrollWidth-f-e)/2;this.setStyle("margin-left:"+d+"px")}}this.setSrc(b);this.bindTapEvent()}});