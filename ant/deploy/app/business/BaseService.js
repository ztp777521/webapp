Ext.define("eapp.business.BaseService",{getApiBaseUrl:function(){return"http://localhost:8080/webapi/"},getGeoBaseUrl:function(){return"http://api.wecity.co/g4d/"},getHttpHeaders:function(){var a=eapp.util.GlobalData;return{apptypeid:a.getAppTypeId(),platformid:a.getPlatformId(),city:a.getCityName(),district:a.getDistrict()}},callApi:function(b,a,c){this.call(this.getApiBaseUrl()+b,a,c,"OK")},callGeo:function(b,a,c){this.call(this.getGeoBaseUrl()+b,a,c,1)},call:function(c,b,e,a){console.log(c);console.log(Ext.JSON.encode(b));var d=this;Ext.Ajax.request({url:c,method:"POST",timeout:60000,params:b,success:function(f){var i=f.responseText;if(i==null||i.length==0){Ext.Viewport.setMasked(false);e.failure("服务器响应的内容为空！");return}var g=null;try{g=Ext.JSON.decode(i)}catch(h){Ext.Viewport.setMasked(false);e.failure("服务器返回的数据无法解析！")}if(g.status==a){Ext.Viewport.setMasked(false);e.success(g.data)}else{Ext.Viewport.setMasked(false);e.failure(g.data)}},failure:function(f){console.log(f);Ext.Viewport.setMasked(false);e.failure("调用服务器接口失败！")}})}});