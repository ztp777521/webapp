Ext.define("eapp.controller.Volunteer",{extend:"Ext.app.Controller",config:{refs:{mainview:"mainview",volunteerpageview:"volunteerpageview",addideaView:"addideaView",applyvolunteerview:"applyvolunteerview",applyvolunteertowview:"applyvolunteertowviewq",shequwanggename:{selector:"volunteerpageview formpanel fieldset labelEx[name=shequwanggename]"},shenqinggezhangname:{selector:"volunteerpageview formpanel fieldset labelEx[name=shenqinggezhangname]"},wodewanggename:{selector:"volunteerpageview formpanel fieldset labelEx[name=wodewanggename]"},tijiaoyijianname:{selector:"volunteerpageview formpanel fieldset labelEx[name=tijiaoyijianname]"},gezhagnfengcainame:{selector:"volunteerpageview formpanel fieldset labelEx[name=gezhagnfengcainame]"},gezhangtoupiaoname:{selector:"volunteerpageview formpanel fieldset labelEx[name=gezhangtoupiaoname]"},nextbuttonname:{selector:"applyvolunteerview formpanel button[name=nextbuttonname]"},addsublmitname:{selector:"applyvolunteertowview formpanel button[name=addsublmitname]"},},control:{shequwanggename:{tap:"OnShequwanggenameTap",},shenqinggezhangname:{tap:"OnShenqinggezhangnameTap",},wodewanggename:{tap:"OnWodewanggenameTap",},tijiaoyijianname:{tap:"OnTijiaoyijiannameTap",},gezhagnfengcainame:{tap:"OnGezhagnfengcainameTap",},gezhangtoupiaoname:{tap:"OnGezhangtoupiaonameTap",},nextbuttonname:{tap:"OnNextbuttonnameTap"},addsublmitname:{tap:"OnAddsublmitnameTap",}}},OnAddsublmitnameTap:function(){var f=this;var g=f.getApplyvolunteertowview();var e=Ext.ComponentQuery.query("#nonumberid",g)[0].getValue();var c=Ext.ComponentQuery.query("#remarkContentid",g)[0].getValue();var b=eapp.util.GlobalData.getCurrentUser();var a=b.get("userid");Ext.Viewport.setMasked({xtype:"loadmask",message:"请稍候..."});var d=Ext.create("eapp.business.VolunteerService");d.addVolunteer(a,e,c,{success:function(h){if(h=="OK"){eapp.view.Dialogs.showAlert("智慧潘家园","申请成功!~")}else{eapp.view.Dialogs.showAlert("智慧潘家园","申请失败!~")}Ext.Viewport.setMasked(false)},failure:function(h){console.log(h);Ext.Viewport.setMasked(false)}})},OnNextbuttonnameTap:function(){var d=this;var e=d.getApplyvolunteerview();if(e==null||e=="undefined"){e=Ext.create("eapp.view.gongjianhexie.ApplyVolunteer")}var b=Ext.ComponentQuery.query("#checkboxs",e)[0];var g="";for(var c=0;c<b.getItems().length-1;c++){if(b.getItems().items[c+1].getChecked()){g+=b.getItems().items[c+1].getLabel()+","}}if(g==""||g.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园","请选择网格编号!~");return}var f=d.getApplyvolunteertowview();if(f==null||f==""){f=Ext.create("eapp.view.gongjianhexie.ApplyVolunteerTow")}Ext.ComponentQuery.query("#nonumberid",f)[0].setValue(g);d.getMainview().push(f);var a=eapp.app.pageStack.length;if(eapp.app.pageStack[a-1]!="applyvolunteertowview"){eapp.app.pageStack.push("applyvolunteertowview")}},OnShequwanggenameTap:function(){alert(0)},OnShenqinggezhangnameTap:function(){var b=this;var c=b.getApplyvolunteerview();if(c==null||c=="undefined"){c=Ext.create("eapp.view.gongjianhexie.ApplyVolunteer")}c.init();b.getMainview().push(c);var a=eapp.app.pageStack.length;if(eapp.app.pageStack[a-1]!="applyvolunteerview"){eapp.app.pageStack.push("applyvolunteerview")}},OnWodewanggenameTap:function(){alert("我的网格")},OnTijiaoyijiannameTap:function(){var c=this;var b=c.getAddideaView();if(b==null||b=="undefined"){b=Ext.create("eapp.view.gongjianhexie.AddIdea")}c.getMainview().push(b);var a=eapp.app.pageStack.length;if(eapp.app.pageStack[a-1]!="addideaview"){eapp.app.pageStack.push("addideaview")}},OnGezhagnfengcainameTap:function(){alert("格长风采")},OnGezhangtoupiaonameTap:function(){alert("格长投票")}});