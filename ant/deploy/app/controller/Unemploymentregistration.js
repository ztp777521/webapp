Ext.define("eapp.controller.Unemploymentregistration",{extend:"Ext.app.Controller",config:{refs:{mainview:"mainview",unempageview:"unempageview",addunemview:"addunemview",myunemview:"myunemview",unemdetailview:"unemdetailview",unemsubmitname:{selector:"unempageview formpanel fieldset labelEx[name=unemsubmitname]"},unemmyinfoname:{selector:"unempageview formpanel fieldset labelEx[name=unemmyinfoname]"},tijiaobuttonname:{selector:"addunemview formpanel button[name=tijiaobuttonname]"},},control:{unemsubmitname:{tap:"OnUnemsubmitnameTap",},unemmyinfoname:{tap:"OnUnemmyinfonameTap"},tijiaobuttonname:{tap:"OnTiajiaonameTap"},myunemview:{itemtap:"OnTiemTap",}}},OnTiemTap:function(a,d,f,b,g,h){var i=this;var j=Ext.create("eapp.view.wenxinjiayuan.UnemDetail");if(j==null||j=="undefined"){j=Ext.create("eapp.view.wenxinjiayuan.UnemDetail")}j.init(b);i.getMainview().push(j);var c=eapp.app.pageStack.length;if(eapp.app.pageStack[c-1]!="unemdetailview"){eapp.app.pageStack.push("unemdetailview")}},OnTiajiaonameTap:function(){var i=this;var m=i.getAddunemview();var d=Ext.ComponentQuery.query("#unemusernameid",m)[0].getValue();var k=Ext.ComponentQuery.query("#unemphoneid",m)[0].getValue();var l=Ext.ComponentQuery.query("#unememailid",m)[0].getValue();var j=Ext.ComponentQuery.query("#unemhomeid",m)[0].getValue();var f=Ext.ComponentQuery.query("#unemjiuyeid",m)[0].getValue();var a=Ext.ComponentQuery.query("#unempaddressid",m)[0].getValue();var h=Ext.ComponentQuery.query("#unempersonalid",m)[0].getValue();var e=Ext.ComponentQuery.query("#remarkontentid",m)[0].getValue();if(d==null||d=="undefined"||d.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园","用户名不能为空!~");return}if(k==null||k=="undefined"||k.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园","电话不能为空!~");return}if(l==null||l=="undefined"||l.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园","email不能为空!~");return}if(j==null||j=="undefined"||j.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园"," 家庭状况不能为空!~");return}if(f==null||f=="undefined"||f.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园","就业意向不能为空!~");return}if(a==null||a=="undefined"||a.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园","家庭住址不能为空!~");return}if(h==null||h=="undefined"||h.length<=0){eapp.view.Dialogs.showAlert("智慧潘家园","就业意向不能为空!~");return}var b=eapp.util.GlobalData.getCurrentUser();var c=b.get("userid");Ext.Viewport.setMasked({xtype:"loadmask",message:"请稍候..."});var g=Ext.create("eapp.business.UnemploymentregistrationService");g.addunem(c,d,k,l,j,f,a,h,{success:function(n){if(n=="OK"){eapp.view.Dialogs.showAlert("智慧潘家园","提交成功!~")}else{eapp.view.Dialogs.showAlert("智慧潘家园","提交失败!~")}Ext.Viewport.setMasked(false)},failure:function(n){console.log(n);Ext.Viewport.setMasked(false)}})},OnUnemsubmitnameTap:function(){var c=this;var b=c.getAddunemview();if(b==null||b=="undefined"){b=Ext.create("eapp.view.wenxinjiayuan.AddUnem")}c.getMainview().push(b);var a=eapp.app.pageStack.length;if(eapp.app.pageStack[a-1]!="addunemview"){eapp.app.pageStack.push("addunemview")}},OnUnemmyinfonameTap:function(){var e=this;var d=e.getMyunemview();if(d==null||d=="undefined"){d=Ext.create("eapp.view.wenxinjiayuan.MyUnem")}var c=eapp.util.GlobalData.getCurrentUser();var b=c.get("userid");Ext.Viewport.setMasked({xtype:"loadmask",message:"请稍候..."});var f=Ext.create("eapp.business.UnemploymentregistrationService");f.findunem(b,{success:function(g){d.init(g);Ext.Viewport.setMasked(false)},failure:function(g){console.log(g);Ext.Viewport.setMasked(false)}});e.getMainview().push(d);var a=eapp.app.pageStack.length;if(eapp.app.pageStack[a-1]!="myunemview"){eapp.app.pageStack.push("myunemview")}}});